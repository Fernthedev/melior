<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="`pdl` dialect."><title>melior::dialect::ods::pdl - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../../static.files/rustdoc-fa3bb1812debf86c.css"><meta name="rustdoc-vars" data-root-path="../../../../" data-static-root-path="../../../../static.files/" data-current-crate="melior" data-themes="" data-resource-suffix="" data-rustdoc-version="1.74.1 (a28077b28 2023-12-04)" data-channel="1.74.1" data-search-js="search-8be46b629f5f14a8.js" data-settings-js="settings-74424d7eec62a23e.js" ><script src="../../../../static.files/storage-fec3eaa3851e447d.js"></script><script defer src="../../../../static.files/main-c5bd66d33317d69f.js"></script><noscript><link rel="stylesheet" href="../../../../static.files/noscript-5d8b3c7633ad77ba.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../../../melior/index.html"><img class="rust-logo" src="../../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a></nav><nav class="sidebar"><a class="logo-container" href="../../../../melior/index.html"><img class="rust-logo" src="../../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Module pdl</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#functions">Functions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../../../index.html">melior</a>::<wbr><a href="../../index.html">dialect</a>::<wbr><a href="../index.html">ods</a>::<wbr><a class="mod" href="#">pdl</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../../../src/melior/dialect/ods.rs.html#63-66">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p><code>pdl</code> dialect.</p>
<p>PDL presents a high level abstraction for the rewrite pattern infrastructure
available in MLIR. This abstraction allows for representing patterns
transforming MLIR, as MLIR. This allows for applying all of the benefits
that the general MLIR infrastructure provides, to the infrastructure itself.
This means that pattern matching can be more easily verified for
correctness, targeted by frontends, and optimized.</p>
<p>PDL abstracts over various different aspects of patterns and core MLIR data
structures. Patterns are specified via a <code>pdl.pattern</code> operation. These
operations contain a region body for the “matcher” code, and terminate with
a <code>pdl.rewrite</code> that either dispatches to an external rewriter or contains
a region for the rewrite specified via <code>pdl</code>. The types of values in <code>pdl</code>
are handle types to MLIR C++ types, with <code>!pdl.attribute</code>, <code>!pdl.operation</code>,
<code>!pdl.value</code>, and <code>!pdl.type</code> directly mapping to <code>mlir::Attribute</code>,
<code>mlir::Operation*</code>, <code>mlir::Value</code>, and <code>mlir::Type</code> respectively.</p>
<p>An example pattern is shown below:</p>
<div class="example-wrap"><pre class="language-mlir"><code>// pdl.pattern contains metadata similarly to a `RewritePattern`.
pdl.pattern : benefit(1) {
  // External input operand values are specified via `pdl.operand` operations.
  // Result types are constrainted via `pdl.type` operations.

  %resultType = pdl.type
  %inputOperand = pdl.operand
  %root = pdl.operation &quot;foo.op&quot;(%inputOperand) -&gt; %resultType
  pdl.rewrite %root {
    pdl.replace %root with (%inputOperand)
  }
}
</code></pre></div>
<p>The above pattern simply replaces an operation with its first operand. Note
how the input operation is specified structurally, similarly to how it would
look in memory. This is a simple example and pdl provides support for many
other features such as applying external constraints or external generator
methods. These features and more are detailed below.</p>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.ApplyNativeConstraintOp.html" title="struct melior::dialect::ods::pdl::ApplyNativeConstraintOp">ApplyNativeConstraintOp</a></div><div class="desc docblock-short"><a href="struct.ApplyNativeConstraintOp.html" title="struct melior::dialect::ods::pdl::ApplyNativeConstraintOp"><code>apply_native_constraint</code></a> operation. Apply a native constraint to a set of provided entities.</div></li><li><div class="item-name"><a class="struct" href="struct.ApplyNativeConstraintOpBuilder.html" title="struct melior::dialect::ods::pdl::ApplyNativeConstraintOpBuilder">ApplyNativeConstraintOpBuilder</a></div><div class="desc docblock-short">Builder for <a href="struct.ApplyNativeConstraintOp.html" title="struct melior::dialect::ods::pdl::ApplyNativeConstraintOp"><code>apply_native_constraint</code></a> operation. Apply a native constraint to a set of provided entities.</div></li><li><div class="item-name"><a class="struct" href="struct.ApplyNativeRewriteOp.html" title="struct melior::dialect::ods::pdl::ApplyNativeRewriteOp">ApplyNativeRewriteOp</a></div><div class="desc docblock-short"><a href="struct.ApplyNativeRewriteOp.html" title="struct melior::dialect::ods::pdl::ApplyNativeRewriteOp"><code>apply_native_rewrite</code></a> operation. Apply a native rewrite method inside of pdl.rewrite region.</div></li><li><div class="item-name"><a class="struct" href="struct.ApplyNativeRewriteOpBuilder.html" title="struct melior::dialect::ods::pdl::ApplyNativeRewriteOpBuilder">ApplyNativeRewriteOpBuilder</a></div><div class="desc docblock-short">Builder for <a href="struct.ApplyNativeRewriteOp.html" title="struct melior::dialect::ods::pdl::ApplyNativeRewriteOp"><code>apply_native_rewrite</code></a> operation. Apply a native rewrite method inside of pdl.rewrite region.</div></li><li><div class="item-name"><a class="struct" href="struct.AttributeOp.html" title="struct melior::dialect::ods::pdl::AttributeOp">AttributeOp</a></div><div class="desc docblock-short"><a href="struct.AttributeOp.html" title="struct melior::dialect::ods::pdl::AttributeOp"><code>attribute</code></a> operation. Define an input attribute in a pattern.</div></li><li><div class="item-name"><a class="struct" href="struct.AttributeOpBuilder.html" title="struct melior::dialect::ods::pdl::AttributeOpBuilder">AttributeOpBuilder</a></div><div class="desc docblock-short">Builder for <a href="struct.AttributeOp.html" title="struct melior::dialect::ods::pdl::AttributeOp"><code>attribute</code></a> operation. Define an input attribute in a pattern.</div></li><li><div class="item-name"><a class="struct" href="struct.EraseOp.html" title="struct melior::dialect::ods::pdl::EraseOp">EraseOp</a></div><div class="desc docblock-short"><a href="struct.EraseOp.html" title="struct melior::dialect::ods::pdl::EraseOp"><code>erase</code></a> operation. Mark an input operation as <code>erased</code>.</div></li><li><div class="item-name"><a class="struct" href="struct.EraseOpBuilder.html" title="struct melior::dialect::ods::pdl::EraseOpBuilder">EraseOpBuilder</a></div><div class="desc docblock-short">Builder for <a href="struct.EraseOp.html" title="struct melior::dialect::ods::pdl::EraseOp"><code>erase</code></a> operation. Mark an input operation as <code>erased</code>.</div></li><li><div class="item-name"><a class="struct" href="struct.OperandOp.html" title="struct melior::dialect::ods::pdl::OperandOp">OperandOp</a></div><div class="desc docblock-short"><a href="struct.OperandOp.html" title="struct melior::dialect::ods::pdl::OperandOp"><code>operand</code></a> operation. Define an external input operand in a pattern.</div></li><li><div class="item-name"><a class="struct" href="struct.OperandOpBuilder.html" title="struct melior::dialect::ods::pdl::OperandOpBuilder">OperandOpBuilder</a></div><div class="desc docblock-short">Builder for <a href="struct.OperandOp.html" title="struct melior::dialect::ods::pdl::OperandOp"><code>operand</code></a> operation. Define an external input operand in a pattern.</div></li><li><div class="item-name"><a class="struct" href="struct.OperandsOp.html" title="struct melior::dialect::ods::pdl::OperandsOp">OperandsOp</a></div><div class="desc docblock-short"><a href="struct.OperandsOp.html" title="struct melior::dialect::ods::pdl::OperandsOp"><code>operands</code></a> operation. Define a range of input operands in a pattern.</div></li><li><div class="item-name"><a class="struct" href="struct.OperandsOpBuilder.html" title="struct melior::dialect::ods::pdl::OperandsOpBuilder">OperandsOpBuilder</a></div><div class="desc docblock-short">Builder for <a href="struct.OperandsOp.html" title="struct melior::dialect::ods::pdl::OperandsOp"><code>operands</code></a> operation. Define a range of input operands in a pattern.</div></li><li><div class="item-name"><a class="struct" href="struct.OperationOp.html" title="struct melior::dialect::ods::pdl::OperationOp">OperationOp</a></div><div class="desc docblock-short"><a href="struct.OperationOp.html" title="struct melior::dialect::ods::pdl::OperationOp"><code>operation</code></a> operation. Define an operation within a pattern.</div></li><li><div class="item-name"><a class="struct" href="struct.OperationOpBuilder.html" title="struct melior::dialect::ods::pdl::OperationOpBuilder">OperationOpBuilder</a></div><div class="desc docblock-short">Builder for <a href="struct.OperationOp.html" title="struct melior::dialect::ods::pdl::OperationOp"><code>operation</code></a> operation. Define an operation within a pattern.</div></li><li><div class="item-name"><a class="struct" href="struct.PatternOp.html" title="struct melior::dialect::ods::pdl::PatternOp">PatternOp</a></div><div class="desc docblock-short"><a href="struct.PatternOp.html" title="struct melior::dialect::ods::pdl::PatternOp"><code>pattern</code></a> operation. Define a rewrite pattern.</div></li><li><div class="item-name"><a class="struct" href="struct.PatternOpBuilder.html" title="struct melior::dialect::ods::pdl::PatternOpBuilder">PatternOpBuilder</a></div><div class="desc docblock-short">Builder for <a href="struct.PatternOp.html" title="struct melior::dialect::ods::pdl::PatternOp"><code>pattern</code></a> operation. Define a rewrite pattern.</div></li><li><div class="item-name"><a class="struct" href="struct.RangeOp.html" title="struct melior::dialect::ods::pdl::RangeOp">RangeOp</a></div><div class="desc docblock-short"><a href="struct.RangeOp.html" title="struct melior::dialect::ods::pdl::RangeOp"><code>range</code></a> operation. Construct a range of pdl entities.</div></li><li><div class="item-name"><a class="struct" href="struct.RangeOpBuilder.html" title="struct melior::dialect::ods::pdl::RangeOpBuilder">RangeOpBuilder</a></div><div class="desc docblock-short">Builder for <a href="struct.RangeOp.html" title="struct melior::dialect::ods::pdl::RangeOp"><code>range</code></a> operation. Construct a range of pdl entities.</div></li><li><div class="item-name"><a class="struct" href="struct.ReplaceOp.html" title="struct melior::dialect::ods::pdl::ReplaceOp">ReplaceOp</a></div><div class="desc docblock-short"><a href="struct.ReplaceOp.html" title="struct melior::dialect::ods::pdl::ReplaceOp"><code>replace</code></a> operation. Mark an input operation as <code>replaced</code>.</div></li><li><div class="item-name"><a class="struct" href="struct.ReplaceOpBuilder.html" title="struct melior::dialect::ods::pdl::ReplaceOpBuilder">ReplaceOpBuilder</a></div><div class="desc docblock-short">Builder for <a href="struct.ReplaceOp.html" title="struct melior::dialect::ods::pdl::ReplaceOp"><code>replace</code></a> operation. Mark an input operation as <code>replaced</code>.</div></li><li><div class="item-name"><a class="struct" href="struct.ResultOp.html" title="struct melior::dialect::ods::pdl::ResultOp">ResultOp</a></div><div class="desc docblock-short"><a href="struct.ResultOp.html" title="struct melior::dialect::ods::pdl::ResultOp"><code>result</code></a> operation. Extract a result from an operation.</div></li><li><div class="item-name"><a class="struct" href="struct.ResultOpBuilder.html" title="struct melior::dialect::ods::pdl::ResultOpBuilder">ResultOpBuilder</a></div><div class="desc docblock-short">Builder for <a href="struct.ResultOp.html" title="struct melior::dialect::ods::pdl::ResultOp"><code>result</code></a> operation. Extract a result from an operation.</div></li><li><div class="item-name"><a class="struct" href="struct.ResultsOp.html" title="struct melior::dialect::ods::pdl::ResultsOp">ResultsOp</a></div><div class="desc docblock-short"><a href="struct.ResultsOp.html" title="struct melior::dialect::ods::pdl::ResultsOp"><code>results</code></a> operation. Extract a result group from an operation.</div></li><li><div class="item-name"><a class="struct" href="struct.ResultsOpBuilder.html" title="struct melior::dialect::ods::pdl::ResultsOpBuilder">ResultsOpBuilder</a></div><div class="desc docblock-short">Builder for <a href="struct.ResultsOp.html" title="struct melior::dialect::ods::pdl::ResultsOp"><code>results</code></a> operation. Extract a result group from an operation.</div></li><li><div class="item-name"><a class="struct" href="struct.RewriteOp.html" title="struct melior::dialect::ods::pdl::RewriteOp">RewriteOp</a></div><div class="desc docblock-short"><a href="struct.RewriteOp.html" title="struct melior::dialect::ods::pdl::RewriteOp"><code>rewrite</code></a> operation. Specify the rewrite of a matched pattern.</div></li><li><div class="item-name"><a class="struct" href="struct.RewriteOpBuilder.html" title="struct melior::dialect::ods::pdl::RewriteOpBuilder">RewriteOpBuilder</a></div><div class="desc docblock-short">Builder for <a href="struct.RewriteOp.html" title="struct melior::dialect::ods::pdl::RewriteOp"><code>rewrite</code></a> operation. Specify the rewrite of a matched pattern.</div></li><li><div class="item-name"><a class="struct" href="struct.TypeOp.html" title="struct melior::dialect::ods::pdl::TypeOp">TypeOp</a></div><div class="desc docblock-short"><a href="struct.TypeOp.html" title="struct melior::dialect::ods::pdl::TypeOp"><code>type</code></a> operation. Define a type handle within a pattern.</div></li><li><div class="item-name"><a class="struct" href="struct.TypeOpBuilder.html" title="struct melior::dialect::ods::pdl::TypeOpBuilder">TypeOpBuilder</a></div><div class="desc docblock-short">Builder for <a href="struct.TypeOp.html" title="struct melior::dialect::ods::pdl::TypeOp"><code>type</code></a> operation. Define a type handle within a pattern.</div></li><li><div class="item-name"><a class="struct" href="struct.TypesOp.html" title="struct melior::dialect::ods::pdl::TypesOp">TypesOp</a></div><div class="desc docblock-short"><a href="struct.TypesOp.html" title="struct melior::dialect::ods::pdl::TypesOp"><code>types</code></a> operation. Define a range of type handles within a pattern.</div></li><li><div class="item-name"><a class="struct" href="struct.TypesOpBuilder.html" title="struct melior::dialect::ods::pdl::TypesOpBuilder">TypesOpBuilder</a></div><div class="desc docblock-short">Builder for <a href="struct.TypesOp.html" title="struct melior::dialect::ods::pdl::TypesOp"><code>types</code></a> operation. Define a range of type handles within a pattern.</div></li></ul><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn._operation.html" title="fn melior::dialect::ods::pdl::_operation">_operation</a></div><div class="desc docblock-short">Creates a new <a href="struct.OperationOp.html" title="struct melior::dialect::ods::pdl::OperationOp"><code>operation</code></a> operation. Define an operation within a pattern.</div></li><li><div class="item-name"><a class="fn" href="fn.apply_native_constraint.html" title="fn melior::dialect::ods::pdl::apply_native_constraint">apply_native_constraint</a></div><div class="desc docblock-short">Creates a new <a href="struct.ApplyNativeConstraintOp.html" title="struct melior::dialect::ods::pdl::ApplyNativeConstraintOp"><code>apply_native_constraint</code></a> operation. Apply a native constraint to a set of provided entities.</div></li><li><div class="item-name"><a class="fn" href="fn.apply_native_rewrite.html" title="fn melior::dialect::ods::pdl::apply_native_rewrite">apply_native_rewrite</a></div><div class="desc docblock-short">Creates a new <a href="struct.ApplyNativeRewriteOp.html" title="struct melior::dialect::ods::pdl::ApplyNativeRewriteOp"><code>apply_native_rewrite</code></a> operation. Apply a native rewrite method inside of pdl.rewrite region.</div></li><li><div class="item-name"><a class="fn" href="fn.attribute.html" title="fn melior::dialect::ods::pdl::attribute">attribute</a></div><div class="desc docblock-short">Creates a new <a href="struct.AttributeOp.html" title="struct melior::dialect::ods::pdl::AttributeOp"><code>attribute</code></a> operation. Define an input attribute in a pattern.</div></li><li><div class="item-name"><a class="fn" href="fn.erase.html" title="fn melior::dialect::ods::pdl::erase">erase</a></div><div class="desc docblock-short">Creates a new <a href="struct.EraseOp.html" title="struct melior::dialect::ods::pdl::EraseOp"><code>erase</code></a> operation. Mark an input operation as <code>erased</code>.</div></li><li><div class="item-name"><a class="fn" href="fn.operand.html" title="fn melior::dialect::ods::pdl::operand">operand</a></div><div class="desc docblock-short">Creates a new <a href="struct.OperandOp.html" title="struct melior::dialect::ods::pdl::OperandOp"><code>operand</code></a> operation. Define an external input operand in a pattern.</div></li><li><div class="item-name"><a class="fn" href="fn.operands.html" title="fn melior::dialect::ods::pdl::operands">operands</a></div><div class="desc docblock-short">Creates a new <a href="struct.OperandsOp.html" title="struct melior::dialect::ods::pdl::OperandsOp"><code>operands</code></a> operation. Define a range of input operands in a pattern.</div></li><li><div class="item-name"><a class="fn" href="fn.pattern.html" title="fn melior::dialect::ods::pdl::pattern">pattern</a></div><div class="desc docblock-short">Creates a new <a href="struct.PatternOp.html" title="struct melior::dialect::ods::pdl::PatternOp"><code>pattern</code></a> operation. Define a rewrite pattern.</div></li><li><div class="item-name"><a class="fn" href="fn.range.html" title="fn melior::dialect::ods::pdl::range">range</a></div><div class="desc docblock-short">Creates a new <a href="struct.RangeOp.html" title="struct melior::dialect::ods::pdl::RangeOp"><code>range</code></a> operation. Construct a range of pdl entities.</div></li><li><div class="item-name"><a class="fn" href="fn.replace.html" title="fn melior::dialect::ods::pdl::replace">replace</a></div><div class="desc docblock-short">Creates a new <a href="struct.ReplaceOp.html" title="struct melior::dialect::ods::pdl::ReplaceOp"><code>replace</code></a> operation. Mark an input operation as <code>replaced</code>.</div></li><li><div class="item-name"><a class="fn" href="fn.result.html" title="fn melior::dialect::ods::pdl::result">result</a></div><div class="desc docblock-short">Creates a new <a href="struct.ResultOp.html" title="struct melior::dialect::ods::pdl::ResultOp"><code>result</code></a> operation. Extract a result from an operation.</div></li><li><div class="item-name"><a class="fn" href="fn.results.html" title="fn melior::dialect::ods::pdl::results">results</a></div><div class="desc docblock-short">Creates a new <a href="struct.ResultsOp.html" title="struct melior::dialect::ods::pdl::ResultsOp"><code>results</code></a> operation. Extract a result group from an operation.</div></li><li><div class="item-name"><a class="fn" href="fn.rewrite.html" title="fn melior::dialect::ods::pdl::rewrite">rewrite</a></div><div class="desc docblock-short">Creates a new <a href="struct.RewriteOp.html" title="struct melior::dialect::ods::pdl::RewriteOp"><code>rewrite</code></a> operation. Specify the rewrite of a matched pattern.</div></li><li><div class="item-name"><a class="fn" href="fn.type.html" title="fn melior::dialect::ods::pdl::type">type</a></div><div class="desc docblock-short">Creates a new <a href="struct.TypeOp.html" title="struct melior::dialect::ods::pdl::TypeOp"><code>type</code></a> operation. Define a type handle within a pattern.</div></li><li><div class="item-name"><a class="fn" href="fn.types.html" title="fn melior::dialect::ods::pdl::types">types</a></div><div class="desc docblock-short">Creates a new <a href="struct.TypesOp.html" title="struct melior::dialect::ods::pdl::TypesOp"><code>types</code></a> operation. Define a range of type handles within a pattern.</div></li></ul></section></div></main></body></html>